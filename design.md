### 大鱼吃小鱼

##### 项目难点

+ 设计鱼群的移动：

  开始考虑使用css的keyframe进行实现，但keyframe无法检测到用户输入，所以keyframe可以让鱼动起来却不能实现吃鱼的效果。无法满足游戏的交互性

  同时使用keyframe的游戏性能不高，动画效果出现卡顿或不连贯的现象。

  于是考虑别的方法：计时器启发了我使用动态的 x和y 进行坐标定位

+ 键盘敲落的连续性问题：开始使用onkeydown检测游戏窗口，发现一个问题：单次按下方向键不放，只能移动一步。实际想要实现的是连续移动的效果。

  解决： 加上一个keystate变量，当检测到onkeydown时修改为1；检测到onkeyup修改为0. 在每个循环周期 如果keystate = 1，才修改playerfish的方位；

+ 多个方向键组合的移动：开始使用direction存放键盘的输入结果进行移动，这样的潜在问题就是 如果两个方向键同时按下（ex：↑&→），只有其中一个能够发挥作用。

  为了能够同时向多个方向移动，修改 方向 为map，同时存放上下左右的按下情况。在onkeydown和onkeyup函数中修改这个map的值。playerfish的移动会对上下左右分别进行。

##### 最终设计方案

+ 使用setInterval函数设定时间间隔 重复运行更新画面的任务，使用uesEffect进行变量修改

+ 生成鱼：一定范围时间内会自动生成鱼；每次检测当前鱼群数量，如果少于某个指定值那么就增加生成的鱼的数量 
+ 在每个周期开始，检测键盘方向并移动玩家；对鱼群的所有鱼进行遍历，移动这些鱼并检查它们是否和玩家重叠，吃或被吃
+ 吃：使用filter将吃掉的鱼删掉
+ 被吃：设置deathTime为指定正整数（死掉一次的冷却时间），之后每个周期都会检查deathTime并减1，知道dealthTime恢复为0。如果deathTime为0，则冷却时间结束。冷却时不透明度 opacity 降低，吃和被吃的功能被停用。
+ 鱼的定位：开始追求响应式布局的实现效果，使用了屏幕比例的单位进行css设置。实现过程发现这样会出现一些大小不合适的情况。最终采用的效果只顾及了普通电脑屏幕的效果，使用px作为通用的度量单位。

